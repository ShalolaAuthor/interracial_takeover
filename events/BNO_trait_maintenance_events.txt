namespace = bno_trait_maintenance

# Give BBC trait to any half-or-more black character with a big dick
# NOTE assumes the player's carnalitas game rules are big dick = good and small dick = bad. If they are playing with bid dick = bad rules, idk why they play this mod
bno_trait_maintenance.0001 = {
	hidden = yes
	
	trigger = {
		OR = {
			has_trait = bno_mixed
			has_trait = bno_mostly_black
			has_trait = bno_full_black
			has_character_flag = bno_originally_black
		}
		is_male = yes
		is_adult = yes
	}
	immediate = {
		if = {
			limit = {
				has_inactive_trait = bno_bbc
			}
			make_trait_active = bno_bbc
		}
		else = {
			add_trait = bno_bbc
		}
	}
}

bno_trait_maintenance.0002 = {			#makes all caged characters have tiniest dick
	hidden = yes
	trigger = {
		root = {
			has_trait = bno_caged
			is_adult = yes
			is_male = yes
		}
	}
	immediate = {
		remove_trait = dick_big_good_1
		remove_trait = dick_big_good_2
		remove_trait = dick_big_good_3
		remove_trait = dick_small_bad_1
		remove_trait = dick_small_bad_2
	}
	option = {
		add_trait = dick_small_bad_3
	}
}

bno_trait_maintenance.0003 = {			#castrated characters should obviously not have dick traits
	hidden = yes
	trigger = {
		root = {
			OR = {
				has_trait = bno_castrated
				has_trait = eunuch_1
				has_trait = beardless_eunuch
			}
		}
	}
	immediate = {
		remove_trait = dick_big_good_1
		remove_trait = dick_big_good_2
		remove_trait = dick_big_good_3
		remove_trait = dick_small_bad_1
		remove_trait = dick_small_bad_2
		remove_trait = dick_small_bad_3
		remove_trait = bno_bbc
	}
}

bno_trait_maintenance.0004 = { #make all non bbc male slaves caged if owner is bbc
	hidden = yes
	trigger = {
		root = {
			is_independent_ruler = no
			exists = liege
			liege = {
				has_trait = bno_bbc
			}
			has_trait = slave
			NOT = { has_trait = bno_bbc }
			is_adult = yes
			is_male = yes
		}
	}
	immediate = {
		add_trait = bno_caged
		remove_trait = dick_big_good_1
		remove_trait = dick_big_good_2
		remove_trait = dick_big_good_3
		remove_trait = dick_small_bad_1
		remove_trait = dick_small_bad_2
		add_trait = dick_small_bad_3
	}
}

bno_trait_maintenance.0005= {			#african girls cannot have whitegirl trait
	hidden = yes
	trigger = {
		has_character_flag = bno_originally_black
		is_female = yes
		is_adult = yes
	}
	immediate = {
		bno_remove_whitegirl_traits = yes
	}
}
#all africans have black trait
bno_trait_maintenance.0006 = {
	hidden = yes
	
	trigger = {
		root = {
			has_character_flag = bno_originally_black
			NOT = {
				has_trait = bno_mixed
				has_trait = bno_mostly_black
				has_trait = bno_full_black
				has_trait = bno_barely_mixed
			}
		}
	}
	immediate = {
		add_trait = bno_full_black
	}
}

bno_trait_maintenance.0007 = {
	hidden = yes
	trigger = {
		is_adult = yes
		OR = {
			has_inactive_trait = bno_curious
			has_inactive_trait = bno_blacked
			has_inactive_trait = bno_snowbunny
			has_inactive_trait = bno_qos
			has_inactive_trait = bno_mindless_bbc_slut
		}
	}
	immediate = {
		switch = {
			trigger = has_inactive_trait
			bno_curious = { make_trait_active = bno_curious }
			bno_blacked = { make_trait_active = bno_blacked }
			bno_snowbunny = { make_trait_active = bno_snowbunny }
			bno_qos = { make_trait_active = bno_qos }
			bno_mindless_bbc_slut = { make_trait_active = bno_mindless_bbc_slut }
		}
		bno_remove_whitegirl_traits = yes
		if = {
			limit = {
				NOT = { has_character_flag = bno_originally_black }
			}
			add_trait = bno_curious
		}
	}
}