namespace = bno_trait_maintenance

# Give BBC trait to any half-or-more black character with a big dick
# NOTE assumes the player's carnalitas game rules are big dick = good and small dick = bad. If they are playing with bid dick = bad rules, idk why they play this mod
bno_trait_maintenance.0001 = {
	hidden = yes
	
	trigger = {
		root = {
			OR = {
				has_trait = dick_big_good_1
				has_inactive_trait = dick_big_good_1
				has_trait = dick_big_good_2
				has_inactive_trait = dick_big_good_2
				has_trait = dick_big_good_3
				has_inactive_trait = dick_big_good_3
			}
			OR = {
				has_trait = bno_mixed
				has_trait = bno_mostly_black
				has_trait = bno_full_black
				has_character_flag = bno_originally_black
			}
			is_male = yes
			is_adult = yes
		}
	}
	immediate = {
		add_trait = bno_bbc
	}
}

bno_trait_maintenance.0002 = {			#makes all caged characters have tiniest dick
	hidden = yes
	trigger = {
		root = {
			has_trait = bno_caged
			is_adult = yes
			is_male = yes
		}
	}
	immediate = {
		remove_trait = dick_big_good_1
		remove_trait = dick_big_good_2
		remove_trait = dick_big_good_3
		remove_trait = dick_small_bad_1
		remove_trait = dick_small_bad_2
	}
	option = {
		add_trait = dick_small_bad_3
	}
}

bno_trait_maintenance.0003 = {			#castrated characters should obviously not have dick traits
	hidden = yes
	trigger = {
		root = {
			OR = {
				has_trait = bno_castrated
				has_trait = eunuch_1
				has_trait = beardless_eunuch
			}
		}
	}
	immediate = {
		remove_trait = dick_big_good_1
		remove_trait = dick_big_good_2
		remove_trait = dick_big_good_3
		remove_trait = dick_small_bad_1
		remove_trait = dick_small_bad_2
		remove_trait = dick_small_bad_3
		remove_trait = bno_bbc
	}
}

bno_trait_maintenance.0004 = { #make all non bbc male slaves caged if owner is bbc
	hidden = yes
	trigger = {
		root = {
			is_independent_ruler = no
			exists = liege
			liege = {
				has_trait = bno_bbc
			}
			has_trait = slave
			NOT = { has_trait = bno_bbc }
			is_adult = yes
			is_male = yes
		}
	}
	immediate = {
		add_trait = bno_caged
		remove_trait = dick_big_good_1
		remove_trait = dick_big_good_2
		remove_trait = dick_big_good_3
		remove_trait = dick_small_bad_1
		remove_trait = dick_small_bad_2
		add_trait = dick_small_bad_3
	}
}

bno_trait_maintenance.0005= {			#african girls cannot have whitegirl trait
	hidden = yes
	trigger = {
		root = {
			has_character_flag = bno_originally_black
			is_female = yes
			is_adult = yes
		}
	}
	immediate = {
		remove_trait = bno_lifestyle_whitegirl
	}
}
#all africans have black trait
bno_trait_maintenance.0006 = {
	hidden = yes
	
	trigger = {
		root = {
			has_character_flag = bno_originally_black
			NOT = {
				has_trait = bno_mixed
				has_trait = bno_mostly_black
				has_trait = bno_full_black
				has_trait = bno_barely_mixed
			}
		}
	}
	immediate = {
		add_trait = bno_full_black
	}
}
