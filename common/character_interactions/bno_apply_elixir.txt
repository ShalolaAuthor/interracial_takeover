bno_apply_elixir_interaction = {
    interface_priority = 999
    icon = icon_bno_apply_elixir_interaction

    category = interaction_category_friendly
    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    scope:actor = {
                        is_a_girl = yes
                    }
                    scope:recipient = {
                        is_bbc = yes
                        NOT = { this = scope:actor }
                    }
                }
                desc = bno_apply_elixir_interaction.desc.female.bbc
            }
            triggered_desc = {
                trigger = {
                    scope:actor = {
                        is_a_girl = yes
                    }
                    scope:recipient = {
                        is_bbc = no
                        is_a_male = yes
                        NOT = { this = scope:actor }
                    }
                }
                desc = bno_apply_elixir_interaction.desc.female.whiteboi
            }
            triggered_desc = {
                trigger = {
                    scope:actor = scope:recipient
                    scope:actor = { is_bbc = yes }
                }
                desc = bno_apply_elixir_interaction.desc.self.bbc
            }
            triggered_desc = {
                trigger = {
                    scope:actor = scope:recipient
                    scope:actor = {
                        is_a_male = yes
                        is_bbc = no
                    }
                }
                desc = bno_apply_elixir_interaction.desc.self.whiteboi
            }
            triggered_desc = {
                trigger = {
                    scope:actor = {
                        is_bbc = yes
                    }
                    scope:recipient = {
                        is_bbc = no
                        is_a_male = yes
                        NOT = { this = scope:actor }
                    }
                }
                desc = bno_apply_elixir_interaction.desc.bbc.whiteboi
            }
            triggered_desc = {
                trigger = {
                    scope:actor = {
                        is_bbc = yes
                    }
                    scope:recipient = {
                        is_bbc = yes
                        NOT = { this = scope:actor }
                    }
                }
                desc = bno_apply_elixir_interaction.desc.bbc.bbc
            }
            triggered_desc = {
                trigger = {
                    scope:actor = {
                        is_whiteboi = yes
                    }
                    scope:recipient = {
                        is_bbc = yes
                        NOT = { this = scope:actor }
                    }
                }
                desc = bno_apply_elixir_interaction.desc.whiteboi.bbc
            }
            triggered_desc = {
                trigger = {
                    scope:actor = {
                        is_whiteboi = yes
                    }
                    scope:recipient = {
                        is_whiteboi = yes
                        NOT = { this = scope:actor }
                    }
                }
                desc = bno_apply_elixir_interaction.desc.whiteboi.whiteboi
            }
        }
    }
    common_interaction = yes

    is_shown = {
        scope:actor = {
            is_adult = yes
            is_bno_actor = yes
            any_character_artifact = {
                OR = {
                    has_variable = bno_tincture_of_genesis
                    has_variable = bno_elixir_of_the_black_womb
                }
            }
        }
        scope:recipient = {
            trigger_if = {
                limit = { is_ai = yes }
                is_bbc = yes
            }
            trigger_else = {
                OR = {
                    is_bbc = yes
                    is_whiteboi = yes
                }
            }
        }
    }

    is_highlighted = {
        always = yes
    }

    send_option = { # tincture of genesis
        is_valid = {
            custom_tooltip = {
                text = bno_apply_elixir_interaction.bno_tincture_of_genesis.tooltip
                scope:actor = {
                    any_character_artifact = {
                        has_variable = bno_tincture_of_genesis
                    }
                }
                scope:recipient = {
                    is_a_male = yes
                    NOR = {
                        has_trait = bno_castrated
                        has_trait = bno_castrated_futa
                    }
                }
            }
        }
        flag = bno_apply_elixir_interaction_bno_tincture_of_genesis
    }

    send_option = { # elixir of the black womb
        is_valid = {
            custom_tooltip = {
                text = bno_apply_elixir_interaction.bno_elixir_of_the_black_womb.tooltip
                scope:actor = {
                    any_character_artifact = {
                        has_variable = bno_elixir_of_the_black_womb
                    }
                }
                scope:recipient = {
                    is_bbc = no
                    is_male = yes
                }
            }
        }
        flag = bno_apply_elixir_interaction_bno_elixir_of_the_black_womb
    }
    on_accept = {
        if = {
            limit = { scope:bno_apply_elixir_interaction_bno_tincture_of_genesis = yes }
            scope:actor = {
                custom_tooltip = {
                    text = bno_apply_elixir_interaction.bno_tincture_of_genesis.effect.actor.tooltip
                    trigger_event = bno_apply_elixir.0001
                }
            }
            scope:recipient = {
                custom_tooltip = {
                    text = bno_apply_elixir_interaction.bno_tincture_of_genesis.effect.recipient.tooltip
                }
            }
        }
        else_if = {
            limit = { scope:bno_apply_elixir_interaction_bno_elixir_of_the_black_womb = yes }
            scope:actor = {
                custom_tooltip = {
                    text = bno_apply_elixir_interaction.bno_elixir_of_the_black_womb.effect.actor.tooltip
                    trigger_event = bno_apply_elixir.0002
                }
            }
            scope:recipient = {
                custom_tooltip = {
                    text = bno_apply_elixir_interaction.bno_elixir_of_the_black_womb.effect.recipient.tooltip
                }
            }
        }
    }

    auto_accept = yes

    ai_targets = {
        ai_recipients = courtiers
    }

    ai_potential = {
        any_character_artifact = {
            OR = {
                has_variable = bno_tincture_of_genesis
                has_variable = bno_elixir_of_the_black_womb
            }
        }
    }

    ai_will_do = {
        base = 0
        modifier = {
            add = 1000000
            scope:actor = {
                any_character_artifact = {
                    OR = {
                        has_variable = bno_tincture_of_genesis
                        has_variable = bno_elixir_of_the_black_womb
                    }
                }
            }
            scope:recipient = {
                trigger_if = {
                    limit = { scope:bno_apply_elixir_interaction_bno_tincture_of_genesis = yes }
                    OR = {
                        NOT = { has_trait = bno_castrated }
                        NOT = { has_trait = bno_castrated_futa }
                    }
                }
                trigger_if = {
                    limit = { scope:bno_apply_elixir_interaction_bno_elixir_of_the_black_womb = yes }
                    is_bbc = no
                    is_male = yes
                }
            }
        }
    }

    ai_frequency = 1
}