# character interaction for sneaking a BBC into a foreign court

sneak_bbc = {
	category = interaction_category_diplomacy
	interface_priority = 999
	icon = icon_sneak_bbc
	common_interaction = yes
	force_notification = yes
	greeting = negative
	desc = sneak_bbc_desc
	use_diplomatic_range = yes
	
	populate_actor_list = {
		scope:actor = {
			every_courtier = {
				limit = {
					valid_bbc_for_sneak_bbc_trigger = yes
				}
				add_to_list = characters
			}
		}
	}
	
	cooldown_against_recipient = { months = 6 }

	is_shown = {
		NOT = { scope:recipient = scope:actor }
		scope:recipient = { 
			is_ruler = yes
			is_adult = yes
			is_bbc = no
		}
		scope:actor = {
			bno_basic_interaction_valid_actor = yes
		}
	}

	is_valid_showing_failures_only = {
		scope:actor = {
			custom_tooltip = {
				text = sneak_bbc.has_bbc_in_court
				bno_is_there_any_bbc_courtier = yes
			}
			trigger_if = {
				limit = { is_a_girl = yes }
				custom_tooltip = {
					text = sneak_bbc.not_enough_of_a_slut
					is_bno_snowbunny_and_up = yes
				}
			}
		}
		scope:recipient = {
			custom_tooltip = {
				text = sneak_bbc.already_has_bbc_in_court
				any_courtier = {
					valid_bbc_for_sneak_bbc_trigger = yes
					count < 3
				}
			}
		}
	}
	
	on_accept = {
		bno_sneak_bbc_option = yes
	}
}
