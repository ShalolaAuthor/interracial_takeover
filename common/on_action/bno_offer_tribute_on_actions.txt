bno_offer_tribute_phase_1 = {
    trigger = {
        exists = scope:scheme
    }
    first_valid_on_action = {
        bno_offer_tribute_training_phase
    }
}

bno_offer_tribute_phase_2 = {
    trigger = {
        exists = scope:scheme
    }
    first_valid_on_action = {
        bno_offer_tribute_training_phase
    }
}

bno_offer_tribute_phase_3 = {
    trigger = {
        exists = scope:scheme
    }
    first_valid_on_action = {
        bno_offer_tribute_training_phase
    }
}

bno_offer_tribute_training_phase = {
    trigger = {
        exists = scope:scheme
    }
    first_valid = {
        bno_offer_tribute.1101
        bno_offer_tribute.1102
        bno_offer_tribute.1111
        bno_offer_tribute.1112
        bno_offer_tribute.1121
        bno_offer_tribute.1122
        bno_offer_tribute.2000
        bno_offer_tribute.2001
        bno_offer_tribute.2002
        bno_offer_tribute.2011
        bno_offer_tribute.2012
        bno_offer_tribute.3001
        bno_offer_tribute.3011
        bno_offer_tribute.3021
        bno_offer_tribute.3031
        bno_offer_tribute.3041
        bno_offer_tribute.3051
    }
}

bno_offer_tribute_travel_plan_arrived = {
    effect = {
        save_scope_as = tribute
        var:story_bno_tribute_training = {
            var:scheme = {
                save_scope_as = scheme
            }
        }
        scope:scheme = {
            scheme_owner = {
                save_scope_as = owner
            }
            scheme_target_character = {
                save_scope_as = target
            }
        }
        scope:target = {
            trigger_event = bno_offer_tribute.4011
        }
    }
}

bno_offer_tribute_travel_plan_trainer_arrived_back_to_scheme_owner = {
    effect = {
        var:story_bno_tribute_trainer_journey = {
            end_story = yes
        }
        scope:owner = {
            trigger_event = bno_offer_tribute.4021
        }
    }
}

bno_offer_tribute_after_lending_start = {
    trigger = {
        scope:parent ?= {
            is_alive = yes
        }
    }
    effect = {
        scope:parent = {
            send_interface_message = {
                type = bno_blacked_events
                title = tribute_is_coming_back_title
                desc = tribute_is_coming_back_desc
                left_icon = scope:tribute
            }
        }
    }
}

bno_offer_tribute_after_lending_arrival = {
    effect = {
        save_scope_as = bno_tribute
        scope:parent = {
            save_scope_as = bno_parent

            trigger_event = {
                id = bno_offer_tribute.5000
                delayed = yes
            }
        }
    }
}