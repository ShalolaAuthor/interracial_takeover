bno_apply_tincture_of_genesis = {
    if = {
		limit = {
			is_ai = yes
			any_character_artifact = {
				has_variable = bno_tincture_of_genesis
			}
			OR = {
				bno_is_valid_target_for_tincture_of_genesis = yes
				any_courtier = {
					bno_is_valid_target_for_tincture_of_genesis = yes
				}
				liege ?= {
					any_vassal_or_below = {
						bno_is_valid_target_for_tincture_of_genesis = yes
					}
				}
				any_spouse = {
					bno_is_valid_target_for_tincture_of_genesis = yes
				}
			}
		}
		save_scope_as = actor
		if = {
			limit = {
				bno_is_valid_target_for_tincture_of_genesis = yes
			}
			add_to_list = bno_tincture_of_genesis_target
		}
		every_courtier = {
			limit = {
				bno_is_valid_target_for_tincture_of_genesis = yes
			}
			add_to_list  = bno_tincture_of_genesis_target
		}
		liege ?= {
			every_vassal_or_below = {
				limit = {
					bno_is_valid_target_for_tincture_of_genesis = yes
				}
				add_to_list = bno_tincture_of_genesis_target
			}
		}
		every_spouse = {
			limit = {
				bno_is_valid_target_for_tincture_of_genesis = yes
			}
			add_to_list = bno_tincture_of_genesis_target
		}
		if = {
			limit = {
				list_size = {
					name = bno_tincture_of_genesis_target
					value > 0
				}
			}
			random_in_list = {
				list = bno_tincture_of_genesis_target
				limit = {
					this = scope:actor
				}
				save_scope_as = recipient
			}
			if = {
				limit = {
					NOT = { exists = scope:recipient }
				}
				random_in_list = {
					list = bno_tincture_of_genesis_target
					limit = {
						is_bbc = yes
					}
					save_scope_as = recipient
				}
			}
			if = {
				limit = {
					NOT = { exists = scope:recipient }
				}
				random_in_list = {
					list = bno_tincture_of_genesis_target
					limit = {
						is_whiteboi = yes
					}
					save_scope_as = recipient
				}
			}
			if = {
				limit = { exists = scope:recipient }
				scope:actor = {
					trigger_event = bno_apply_elixir.0001
				}
				scope:recipient = {
					add_character_flag = bno_apply_elixir_interaction.applied.bno_tincture_of_genesis
				}
			}
		}
	}
}

bno_start_cum_addiction_scheme = {
    send_interface_toast = {
		type = bno_blacked_events
		title = bno_bbc_cum_addiction_interaction.title
		desc = bno_bbc_cum_addiction_interaction.tooltip
		left_icon = scope:actor
		right_icon = scope:recipient
		start_scheme = {
			type = bno_bbc_cum_addiction
			target_character = scope:recipient
		}
		seduce_interaction_stress_effect = yes
	}
}

bno_influence_child_success = {
	scope:recipient = {
		bno_increase_sluttyness = yes
		add_character_modifier = bno_a_future_queen_for_black
		add_opinion = {
			target = scope:actor
			modifier = admiration_opinion
			opinion = 20
		}
	}
	scope:actor = {
		add_character_modifier = bno_educated_a_future_queen_of_spades
		trigger_event = bno_character_interaction.0001
		add_prestige = minor_prestige_loss
		add_stress = minor_stress_gain
		add_opinion = {
			target = scope:recipient
			modifier = pleased_opinion
			opinion = 20
		}
	}
}

bno_influence_child_failure = {
	scope:recipient = {
		show_as_tooltip = {
			add_opinion = {
				target = scope:actor
				modifier = confused_opinion
				opinion = -20
			}
		}
	}
	scope:actor = {
		trigger_event = bno_character_interaction.0002
		show_as_tooltip = {
			add_prestige = minor_prestige_loss
			add_stress = medium_stress_gain
			add_opinion = {
				target = scope:recipient
				modifier = disappointed_opinion
				opinion = -20
			}
		}
	}
}

bno_cage_prisoner_trait_maintenance_option = {
	scope:recipient ?= {
        bno_caged_effect = {
            CAGER = scope:actor
        }
        add_opinion = {
            target = scope:actor
            modifier = bno_caged_me
            opinion = -50
        }
        release_from_prison = yes
    }
}

bno_use_tincture_of_genesis = {
	random_character_artifact = {
        limit = {
            has_variable = bno_tincture_of_genesis
        }
        destroy_artifact = this
    }
}

bno_use_elixir_of_the_black_womb = {
	random_character_artifact = {
        limit = {
            has_variable = bno_elixir_of_the_black_womb
        }
        destroy_artifact = this
    }
}

bno_castrate_prisoner_option = {
	scope:actor ?= {
		bno_use_tincture_of_genesis = yes
	}
	scope:recipient ?= {
        bno_castrated_effect = yes
        add_opinion = {
            target = scope:actor
            modifier = bno_caged_me
            opinion = -50
        }
        if = {
			limit = { is_ruler = yes }
			depose = yes
		}
        hidden_effect = {
            if = {
                limit = { is_married = yes }
                every_spouse = {
                    divorce = scope:recipient
                }
            }
            if = {
                limit = { exists = betrothed }
                break_betrothal = betrothed
            }
            every_concubine = {
                scope:recipient = { remove_concubine = prev }
            }
            every_relation = {
                type = guardian
                remove_relation_ward = prev
            }
        }
        release_from_prison = yes
    }
}

bno_recruit_prisoner_effect = {
	scope:actor ?= {
        if = {
            limit = {
                scope:recipient ?= { 
                    NOT = { is_courtier_of = scope:actor }
                    is_ruler = no
                }
            }
            hidden_effect = { add_courtier = scope:recipient }
        }
    }
}

bno_enslave_prisoner_option = {
	scope:recipient ?= {
        if = {
			limit = { is_ruler = yes }
			depose = yes
		}
        add_trait = bno_slave
        pay_short_term_gold = {
            target = scope:actor
            gold = this.gold
        }
        hidden_effect = {
            if = {
                limit = { is_married = yes }
                every_spouse = {
                    divorce = scope:recipient
                }
            }
            if = {
                limit = { exists = betrothed }
                break_betrothal = betrothed
            }
            every_concubine = {
                scope:recipient ?= { remove_concubine = prev }
            }
            every_relation = {
                type = guardian
                remove_relation_ward = prev
            }
        }
        release_from_prison = yes
        scope:actor = {
            if = {
                limit = { is_a_girl = yes }
                random_spouse = {
                    limit = {
                        is_bbc = yes
                    }
                    save_scope_as = bbc_master
                }
                if = {
                    limit = { NOT = { exists = scope:bbc_master } }
                    random_courtier_or_guest = {
                        limit = {
                            is_bbc = yes
                        }
                        save_scope_as = bbc_master
                    }
                }
            }
            else = {
                save_scope_as = bbc_master
            }
            scope:bbc_master = {
                set_relation_bno_slave = scope:recipient
            }
        }
    }
}

bno_sneak_bbc_option = {
	scope:actor = {
		send_interface_toast = {
			title = sneak_bbc
			right_icon = scope:recipient
			left_icon = scope:secondary_actor
			add_character_modifier = bno_sneak_bbc
			scope:recipient = {
				add_courtier = scope:secondary_actor
			}
		}
	}
}

bno_remove_futa_existence = {
	if = {
		limit = {
			has_game_rule = bno_futa_existence_no
		}
		remove_trait = futa
		remove_trait = futa_genetic
	}
}