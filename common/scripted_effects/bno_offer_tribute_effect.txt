bno_find_trainer_for_tribute = {
    save_scope_as = story
    var:scheme = {
        scheme_owner = {
            save_scope_as = scheme_owner
        }
    }
    story_owner = {
        save_scope_as = story_owner
        scope:scheme_owner = {
            random_courtier = {
                limit = {
                    is_blackbull = yes
                }
                save_scope_as = trainer
            }
            if = {
                limit = {
                    NOT = { exists = scope:trainer }
                }
                create_bbc = {
                    age = bno_young_adult
                    SCOPE_NAME = trainer
                }
                scope:trainer = {
                    add_character_flag = bno_offer_tribute.created
                }
                hidden_effect = {
                    add_courtier = scope:trainer
                }
            }
        }
        if = {
            limit = {
                exists = scope:trainer
                scope:trainer = {
                    is_alive = yes
                }
            }
            scope:story = {
                set_variable = {
                    name = bno_trainer
                    value = scope:trainer
                }
            }
            scope:scheme_owner = {
                send_interface_message = {
                    type = bno_blacked_events
                    title = bno_offer_tribute_found_suitable_trainer.title
                    desc = bno_offer_tribute_found_suitable_trainer.desc
                    scope:story_owner = {
                        set_relation_bno_offer_tribute_trainer = scope:trainer
                    }
                }
            }
        }
    }
}

bno_training_add_scheme_progress = {
    add_trait_xp = {
		trait = bno_servile
		value = 1
	}
	var:bno_tribute_training_story = {
		var:scheme = {
			add_scheme_progress = 1
		}
	}
}

bno_add_training_and_scheme_progress = {
    scope:tribute = {
        add_trait_xp = {
            trait = bno_servile
            value = $VALUE$
        }
    }
    scope:scheme = {
        add_scheme_progress = $VALUE$
    }
}

bno_beauty_training_maxed = {
    if = {
        limit = {
            scope:tribute = {
                has_trait = beauty_good_3
            }
        }
        trigger_event = bno_offer_tribute.1103
    }
}

bno_breast_training_maxed = {
    if = {
        limit = {
            scope:tribute = {
                has_trait = tits_big_good_4
            }
        }
        trigger_event = bno_offer_tribute.1113
    }
}

bno_asses_training_maxed = {
    if = {
        limit = {
            scope:tribute = {
                has_trait = ass_big_good_4
            }
        }
        trigger_event = bno_offer_tribute.1123
    }
}

bno_offer_tribute_final_reward = {
    scope:tribute = {
        create_character_memory = {
            type = bno_offer_tribute_$TYPE$
            participants = {
                target = scope:target
                scheme_owner = scope:owner
                trainer = scope:trainer
            }
        }
        if = {
            limit = { scope:scheme.var:offer_tribute_end_goal = flag:lending }
            add_character_modifier = {
                modifier = bno_offer_tribute_result_$TYPE$
                years = 5
            }
        }
        else = {
            add_character_modifier = bno_offer_tribute_result_$TYPE$
        }
        var:bno_offer_tribute_story = {
            end_story = yes
        }
        remove_variable = bno_offer_tribute_story
        #TODO: for now is_ruler no is a bandaid fix for this scheme, next time i should do is_ruler yes, then i will do an event to strip her title
    }
    scope:trainer = {
        # TODO: add the rewards to trainer then he will travel back to capital. this rewards is temporary until i can code the proper giving army / and some other shit
        add_gold = $REWARD$
        add_prestige = $REWARD$
        add_piety = $REWARD$
    }
    add_courtier = scope:tribute
    set_relation_bno_slave = scope:tribute
}