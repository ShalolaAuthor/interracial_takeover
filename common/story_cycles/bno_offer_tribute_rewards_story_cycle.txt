story_bno_offer_tribute_rewards = {
    on_owner_death = {
        story_owner = {
            save_scope_as = story_owner
        }
        every_in_list = {
            variable = bno_patrons
            limit = {
                is_alive = yes
            }
            send_interface_toast = {
                type = bno_blacked_events
                title = story_bno_offer_tribute_rewards_died_title
                desc = story_bno_offer_tribute_rewards_died_desc
                right_icon = scope:story_owner
            }
        }
        end_story = yes
    }
    effect_group = { # sex with tribute
        days = { 15 45 }
        trigger = {
            variable_list_size = {
                name = bno_tributes
                value > 0
            }
        }
        triggered_effect = {
            trigger = { always = yes }
            effect = {
                story_owner = { save_scope_as = story_owner }
                every_in_list = {
                    variable = bno_tributes
                    add_to_list = bno_tributes_list
                }
                every_in_list = {
                    list = bno_tributes_list
                    limit = {
                        is_married = yes
                        OR = {
                            NOT = { is_spouse_of = scope:story_owner }
                            bno_is_pregnant = yes
                        }
                    }
                    save_scope_as = tribute
                    every_spouse = {
                        divorce = scope:tribute
                    }
                }
                every_in_list = {
                    list = bno_tributes_list
                    limit = {
                        is_concubine = yes
                        OR = {
                            NOT = { is_concubine_of = scope:story_owner }
                            bno_is_pregnant = yes
                        }
                    }
                    save_scope_as = tribute
                    concubinist = {
                        remove_concubine = scope:tribute
                    }
                }
                scope:story_owner = {
                    send_interface_message = {
                        type = bno_blacked_events
                        title = bno_having_sex_with_tributes_title
                        desc = bno_having_sex_with_tributes_desc
                        every_in_list = {
                            list = bno_tributes_list
                            save_scope_as = tribute
                            scope:story_owner = {
                                if = {
                                    limit = {
                                        scope:tribute = { # Exquisite
                                            OR = {
                                                any_memory = {
                                                    memory_type = bno_offer_tribute_lending_exquisite
                                                }
                                                any_memory = {
                                                    memory_type = bno_offer_tribute_selling_exquisite
                                                }
                                            }
                                            bno_is_pregnant = no
                                        }
                                        scope:story_owner = {
                                            allowed_more_spouses = yes
                                        }
                                    }
                                    marry = scope:tribute                            
                                }
                                else_if = {
                                    limit = {
                                        scope:tribute = { # Adequate
                                            OR = {
                                                any_memory = {
                                                    memory_type = bno_offer_tribute_lending_adequate
                                                }
                                                any_memory = {
                                                    memory_type = bno_offer_tribute_selling_adequate
                                                }
                                            }
                                            bno_is_pregnant = no
                                        }
                                        scope:story_owner = {
                                            allowed_more_concubines = yes
                                        }
                                    }
                                    make_concubine = scope:tribute
                                }
                                bno_have_sex_with_effects = {
                                    PARTNER = scope:tribute
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    effect_group = { # random rewards for patrons
        months = { 3 9 }
        trigger = {
            variable_list_size = {
                name = bno_patrons
                value > 0
            }
        }
        triggered_effect = {
            trigger = { always = yes }
            effect = {
                story_owner = {
                    save_scope_as = story_owner
                }
                every_in_list = {
                    variable = bno_patrons
                    limit = { is_alive = no }
                    save_scope_as = bno_dead_patrons
                    scope:story_owner = {
                        remove_list_variable = {
                            name = bno_patrons
                            target = scope:bno_dead_patrons
                        }
                    }
                }
                every_in_list = {
                    variable = bno_patrons
                    save_scope_as = patrons
                    scope:patrons = {
                        send_interface_message = {
                            type = bno_blacked_events
                            title = bno_give_rewards_to_patron_title
                            desc = bno_give_rewards_to_patron_desc
                            random_list = {
                                1 = {
                                    custom_description = {
                                        text = bno_african_warriors_gift_effect
                                        spawn_army = {
                                            men_at_arms = {
                                                type = bno_african_warriors
                                                stacks = { 1 2 }
                                            }
                                            location = scope:patrons.location
                                            origin = scope:story_owner.location
                                            name = african_warrior_tribute_reward
                                            save_scope_as = bno_african_warriors
                                        }
                                    }
                                }
                                8 = {
                                    scope:story_owner = {
                                        pay_short_term_gold = {
                                            gold = minor_gold_value
                                            target = scope:patrons
                                        }
                                    }
                                }
                                12 = {
                                    add_prestige = scope:story_owner.minor_prestige_gain
                                }
                                16 = {
                                    add_piety = scope:story_owner.minor_piety_gain
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}